<div class="container">
  <h1 class="title">Variant Details</h1>
  
  <div class="columns">
    <div class="column is-two-thirds">
      <div class="box">
        <div class="field">
          <label class="label">SKU</label>
          <p class="content"><%= @variant.sku %></p>
        </div>
        
        <div class="field">
          <label class="label">Price</label>
          <p class="content">$<%= @variant.price %></p>
        </div>
        
        <div class="field">
          <label class="label">Product</label>
          <p class="content">
            <%= link_to @variant.product.name, account_product_path(current_account, @variant.product), class: "is-link" %>
          </p>
        </div>
        
        <% if @variant.product_option_values.any? %>
          <div class="field">
            <label class="label">Options</label>
            <div class="content">
              <% @variant.variant_option_values.includes(:product_option, :product_option_value).each do |vov| %>
                <span class="tag is-light mr-2">
                  <%= vov.product_option.name %>: <%= vov.product_option_value.value %>
                </span>
              <% end %>
            </div>
          </div>
        <% end %>
        
        <div class="field">
          <label class="label">Inventory Count</label>
          <p class="content"><%= @variant.inventory_count %> units in stock</p>
        </div>
        
        <% if @variant.condition %>
          <div class="field">
            <label class="label">Condition</label>
            <p class="content">
              <%= link_to @variant.condition.name, account_condition_path(current_account, @variant.condition), class: "is-link" %>
              <% if @variant.condition.ebay_condition.present? %>
                <span class="tag is-info is-light ml-2">
                  eBay: <%= @variant.condition.ebay_condition_display_name %>
                </span>
              <% end %>
            </p>
          </div>
        <% end %>
        
        <% if @variant.sku_version_number > 1 %>
          <div class="field">
            <label class="label">SKU Version</label>
            <p class="content">Version <%= @variant.sku_version_number %></p>
          </div>
        <% end %>
      </div>
      
      <div class="buttons">
        <%= link_to "Edit", edit_account_variant_path(current_account, @variant), class: "button is-primary" %>
        <%= link_to "Back to Variants", account_variants_path(current_account), class: "button" %>
      </div>
    </div>
    
    <div class="column is-one-third">
      <% if @variant.inventory_units.any? %>
        <div class="box">
          <h2 class="subtitle">Inventory Units</h2>
          <% @variant.inventory_units.each do |unit| %>
            <div class="field">
              <%= link_to unit.serial_number, account_inventory_unit_path(current_account, unit), class: "is-link" %>
              <span class="tag is-<%= unit.status == 'in_stock' ? 'success' : unit.status == 'sold' ? 'danger' : 'warning' %> is-small ml-2">
                <%= unit.status.humanize %>
              </span>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="box has-text-centered">
          <p class="has-text-grey">No inventory units</p>
          <%= link_to "Create Inventory Unit", new_account_inventory_unit_path(current_account, variant_id: @variant.id), class: "button is-small is-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>